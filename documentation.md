
# Pump Yourself server documentation


## Типы запросов к серверу

<Date> - строка в формате 'YYYY-MM-DDTHH:MM:SS'


## Запросы о еде

### Получение всей еды пользователя за период

Запрос: GET /meal?action_id=0...

Параметры запроса:
- user_id - Идентификатор пользователя
- start_date - Начальная дата периода (включительно)
- end_date - Конечная дата периода (включительно)

Тело ответа сервера:
{
    days: {
        <Date> : [{                 // ключ - дата приема пищи (YYYY-MM-DD)
            id: <Number>,           // Идентификатор факта приема пищи
            id_food: <Number>,      // является ключом в объекте dishes
            id_photo: <String>,     // является ключом в объекте photos
            date_time: <Date>,      // дата и время приема пищи (YYYY-MM-DDTHH:MM:SS)
            weight: <Number>,
        }, ...],
        ...
    },

    dishes: {
        <Number> : {            // ключ - id блюда
            name: <String>,
            proteins: <Number>,
            fats: <Number>,
            carbohydrates: <Number>,
            calories: <Number>
        },
        ...
    },

    photos: {
        <String> : <Buffer in JSON>,     // ключ - id фотографии, значение - фотография
        ...
    }
}

### Добавление факта приема пищи пользователем

Запрос: POST /meal?action_id=1

Тело запроса:
[
    <Number>,                       // Идентификатор пользователя
    <Date>,                         // Дата отправки запроса (YYYY-MM-DDTHH:MM:SS)
    {
        name: <String>,             // Название блюда
        weight: <Number>,           // Вес блюда
        photo: <Buffer in JSON>,    // Фотография блюда*
        proteins: <Number>,         // Количество грамм белков на 100 грамм блюда
        fats: <Number>,             // Количество грамм жиров на 100 грамм блюда
        carbohydrates: <Number>,    // Количество грамм углеводов на 100 грамм блюда
        calories: <Number>          // Количество калорий на 100 грамм блюда
    }
]
\* - Если было выбрано стандартное блюдо и оно не было изменено, фотография не присылается

Тело ответа сервера:
<Number> - Идентификатор факта приема пищи

### Редактирование факта приема пищи

Запрос: POST /meal?action_id=2

Тело запроса:
[
    <Number>,                       // Идентификатор пользователя
    <Number>,                       // Идентификатор факта приема пищи
    <Date>,                         // Дата отправки запроса (YYYY-MM-DDTHH:MM:SS)
    eating: {
        name: <String>,             // Название блюда
        weight: <Number>,           // Вес блюда
        photo: <Buffer in JSON>,    // Фотография блюда*
        proteins: <Number>,         // Количество грамм белков на 100 грамм блюда
        fats: <Number>,             // Количество грамм жиров на 100 грамм блюда
        carbohydrates: <Number>,    // Количество грамм углеводов на 100 грамм блюда
        calories: <Number>          // Количество калорий на 100 грамм блюда
    }
]
\* - Фотография присылается только в случае её изменения

Тело ответа сервера отсутствует

### Удаление факта приема пищи

Запрос: POST /meal?action_id=3

Тело запроса:
[ <Number> ] - Идентификатор факта приема пищи

Тело ответа сервера отсутствует



